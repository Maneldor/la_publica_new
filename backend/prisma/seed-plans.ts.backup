import { PrismaClient } from '@prisma/client';

const prisma = new PrismaClient();

async function seedPlans() {
  console.log('ðŸŒ± Iniciando seed de planes...');

  const planes = [
    {
      planType: 'BASIC',
      nombre: 'Pla BÃ sic',
      nombreCorto: 'BÃ sic',
      descripcion: 'Perfecte per comenÃ§ar',
      precioMensual: 39,
      precioAnual: 390,
      limitesJSON: JSON.stringify({
        maxUsuarios: 1,
        maxStorage: 5,          // GB
        maxProyectos: 3,
        maxPostsMes: 10,
        maxAgentsIA: 0,
        maxDocuments: 50,
        maxOfertas: 3
      }),
      caracteristicas: JSON.stringify([
        "Perfil d'empresa bÃ sic",
        "1 membre d'equip",
        "EstadÃ­stiques bÃ siques",
        "Suport per missatgeria interna",
        "3 ofertes actives al mes"
      ]),
      color: '#60A5FA',
      icono: 'âš¡',
      orden: 1,
      destacado: false,
      activo: true,
      visible: true,
      esSistema: true
    },
    {
      planType: 'STANDARD',
      nombre: 'Pla EstÃ ndard',
      nombreCorto: 'EstÃ ndard',
      descripcion: 'Ideal per empreses en creixement',
      precioMensual: 79,
      precioAnual: 790,
      limitesJSON: JSON.stringify({
        maxUsuarios: 3,
        maxStorage: 20,
        maxProyectos: 10,
        maxPostsMes: 50,
        maxAgentsIA: 1,
        maxDocuments: 200,
        maxOfertas: 10
      }),
      caracteristicas: JSON.stringify([
        "Tot del pla BÃ sic",
        "Fins a 3 membres d'equip",
        "EstadÃ­stiques avanÃ§ades",
        "Suport telefÃ²nic",
        "10 ofertes actives/mes",
        "1 Agent IA comercial",
        "Prioritat mitjana en cerques",
        "Enviament ofertes mitjanÃ§ant newsletter"
      ]),
      color: '#34D399',
      icono: 'â­',
      orden: 2,
      destacado: true,
      activo: true,
      visible: true,
      esSistema: true
    },
    {
      planType: 'PREMIUM',
      nombre: 'Pla Premium',
      nombreCorto: 'Premium',
      descripcion: 'Per empreses que volen destacar',
      precioMensual: 149,
      precioAnual: 1490,
      limitesJSON: JSON.stringify({
        maxUsuarios: 10,
        maxStorage: 100,
        maxProyectos: 50,
        maxPostsMes: -1,        // Ilimitado
        maxAgentsIA: 3,
        maxDocuments: 1000,
        maxOfertas: -1          // Ilimitado
      }),
      caracteristicas: JSON.stringify([
        "Tot del pla EstÃ ndard",
        "Fins a 10 membres d'equip",
        "AnalÃ­tiques completes",
        "Informes mensuals",
        "Suport prioritari 24/7",
        "Ofertes ilÂ·limitades",
        "3 Agents IA avanÃ§ats",
        "MÃ xima prioritat en cerques",
        "Perfil destacat",
        "PersonalitzaciÃ³ avanÃ§ada"
      ]),
      color: '#A78BFA',
      icono: 'ðŸŒŸ',
      orden: 3,
      destacado: false,
      activo: true,
      visible: true,
      esSistema: true
    },
    {
      planType: 'EMPRESARIAL',
      nombre: 'Pla Empresarial',
      nombreCorto: 'Empresarial',
      descripcion: 'Solucions a mida per grans corporacions',
      precioMensual: 0,         // Personalizado
      precioAnual: null,
      limitesJSON: JSON.stringify({
        maxUsuarios: -1,        // Ilimitado
        maxStorage: -1,
        maxProyectos: -1,
        maxPostsMes: -1,
        maxAgentsIA: -1,
        maxDocuments: -1,
        maxOfertas: -1
      }),
      caracteristicas: JSON.stringify([
        "Tot del pla Premium",
        "GestiÃ³ multi-empresa",
        "API personalitzada",
        "IntegraciÃ³ amb sistemes interns",
        "Agents IA ilÂ·limitats",
        "Account manager dedicat",
        "FormaciÃ³ personalitzada",
        "SLA garantit"
      ]),
      color: '#F59E0B',
      icono: 'ðŸ‘‘',
      orden: 4,
      destacado: false,
      activo: true,
      visible: true,
      esSistema: true
    }
  ];

  for (const plan of planes) {
    try {
      const resultado = await prisma.planConfig.upsert({
        where: { planType: plan.planType },
        update: {
          ...plan,
          updatedAt: new Date()
        },
        create: plan
      });
      console.log(`âœ… Plan ${resultado.nombre} creado/actualizado`);
    } catch (error) {
      console.error(`âŒ Error con plan ${plan.nombre}:`, error);
    }
  }

  console.log('\nðŸŽ‰ Seed de planes completado');
}

seedPlans()
  .catch((e) => {
    console.error('âŒ Error en seed:', e);
    process.exit(1);
  })
  .finally(async () => {
    await prisma.$disconnect();
  });